<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
  xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

  <changeSet id="5-create-hibernate_sequence" author="msucil">
    <createTable tableName="hibernate_sequence">
      <column name="next_val" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
    </createTable>
  </changeSet>


  <changeSet id="5-create-oauth-token-table" author="msucil">
    <createTable tableName="oauth_access_token">
      <column name="token_id" type="VARCHAR(256)">
        <constraints nullable="true"/>
      </column>
      <column name="token" type="BLOB">
        <constraints nullable="true"/>
      </column>
      <column name="authentication_id" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="user_name" type="VARCHAR(256)">
        <constraints nullable="true"/>
      </column>
      <column name="client_id" type="VARCHAR(256)">
        <constraints nullable="true"/>
      </column>
      <column name="authentication" type="BLOB">
        <constraints nullable="false"/>
      </column>
      <column name="refresh_token" type="VARCHAR(256)">
        <constraints nullable="true"/>
      </column>
    </createTable>

    <addPrimaryKey tableName="oauth_access_token" columnNames="authentication_id"/>

    <createTable tableName="oauth_refresh_token">
      <column name="token_id" type="VARCHAR(256)">
        <constraints nullable="true"/>
      </column>
      <column name="token" type="BLOB">
        <constraints nullable="true"/>
      </column>
      <column name="authentication" type="BLOB">
        <constraints nullable="true"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="5-create-role-table" author="david">
    <createTable tableName="role">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="role_name" type="VARCHAR(256)">
        <constraints nullable=" false"
          unique="true"
          uniqueConstraintName="udx_role_role_name"
        />
      </column>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="role_type" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="role_access" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>
  <changeSet id="5-create-province" author="david">
    <createTable tableName="province">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="5-create-district" author="david">
    <createTable tableName="district">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="province_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_district_province_id"
          referencedTableName="province"
          referencedColumnNames="id"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="5-create-municipality-vdc" author="david">
    <createTable tableName="municipality_vdc">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="district_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_municipality_vdc_district_id"
          referencedTableName="district"
          referencedColumnNames="id"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="5-create-branch" author="david">
    <createTable tableName="branch">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)">
        <constraints nullable=" false"
          unique="true"
          uniqueConstraintName="udx_branch_name"
        />
      </column>
      <column name="branch_code" type="VARCHAR(256)"/>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="province_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_branch_province_id"
          referencedTableName="province"
          referencedColumnNames="id"
        />
      </column>
      <column name="district_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_branch_district_id"
          referencedTableName="district"
          referencedColumnNames="id"
        />
      </column>
      <column name="municipality_vdc_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_branch_municipality_vdc_id"
          referencedTableName="municipality_vdc"
          referencedColumnNames="id"
        />
      </column>
      <column name="street_name" type="VARCHAR(256)"/>
      <column name="ward_number" type="VARCHAR(256)"/>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-user-table" author="msucil">
    <createTable tableName="users">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)"/>
      <column name="user_name" type="VARCHAR(256)">
        <constraints nullable=" false"
          unique="true"
          uniqueConstraintName="udx_user_username"
        />
      </column>
      <column name="email" type="VARCHAR(256)">
        <constraints nullable=" false"
          unique="true"
          uniqueConstraintName="udx_user_email"
        />
      </column>
      <column name="password" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="role_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_user_role_id"
          referencedTableName="role"
          referencedColumnNames="id"
        />
      </column>
      <column name="branch_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_user_branch_id"
          referencedTableName="branch"
          referencedColumnNames="id"/>
      </column>
      <column name="account_no" type="VARCHAR(256)"/>
      <column name="signature_image" type="VARCHAR(256)"/>
      <column name="profile_picture" type="VARCHAR(256)"/>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-foreign-key-in-user-table" author="david">
    <addForeignKeyConstraint baseTableName="users" baseColumnNames="created_by_id"
      constraintName="fk_user_created_by_id" referencedTableName="users"
      referencedColumnNames="id"/>
    <addForeignKeyConstraint baseTableName="users" baseColumnNames="modified_by_id"
      constraintName="fk_user_modified_by_id" referencedTableName="users"
      referencedColumnNames="id"/>
  </changeSet>


  <changeSet id="5-create-foreign-key-in-branch-table" author="david">
    <addForeignKeyConstraint baseTableName="branch" baseColumnNames="created_by_id"
      constraintName="fk_branch_created_by_id" referencedTableName="users"
      referencedColumnNames="id"/>
    <addForeignKeyConstraint baseTableName="branch" baseColumnNames="modified_by_id"
      constraintName="fk_branch_modified_by_id" referencedTableName="users"
      referencedColumnNames="id"/>
  </changeSet>

  <changeSet id="5-create-foreign-key-in-role-table" author="david">
    <addForeignKeyConstraint baseTableName="role" baseColumnNames="created_by_id"
      constraintName="fk_role_created_by_id" referencedTableName="users"
      referencedColumnNames="id"/>
    <addForeignKeyConstraint baseTableName="role" baseColumnNames="modified_by_id"
      constraintName="fk_role_modified_by_id" referencedTableName="users"
      referencedColumnNames="id"/>
  </changeSet>

  <changeSet id="5-create-rights" author="david">
    <createTable tableName="rights">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="rights" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="5-create-permission" author="david">
    <createTable tableName="permission">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="permission_name" type="VARCHAR(256)">
        <constraints nullable="false"
          unique="true"
          uniqueConstraintName="udx_permission_permission_name"/>
      </column>
      <column name="front_url" type="VARCHAR(256)"/>
      <column name="fa_icon" type="VARCHAR(256)"/>
      <column name="orders" type="BIGINT"/>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="5-create-sub-nav" author="david">
    <createTable tableName="sub_nav">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="sub_nav_name" type="VARCHAR(256)">
        <constraints nullable="false"
          unique="true"
          uniqueConstraintName="udx_sub_nav_sub_nav_name"/>
      </column>
      <column name="front_url" type="VARCHAR(256)"/>
      <column name="fa_icon" type="VARCHAR(256)"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-url-api" author="david">
    <createTable tableName="url_api">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="api_url" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="type" type="VARCHAR(256)"/>
    </createTable>
  </changeSet>

  <changeSet id="5-permission-api-list" author="rujan">
    <createTable tableName="permission_api_list">
      <column name="permission_id" type="BIGINT">

      </column>
      <column name="api_list_id" type="BIGINT">
        <constraints unique="true"/>
      </column>

    </createTable>
    <addForeignKeyConstraint baseColumnNames="permission_id"
      baseTableName="permission_api_list"
      constraintName="fk_permission_api_list_permission_id"
      onDelete="CASCADE"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="permission"/>
  </changeSet>

  <changeSet id="5-permission-sub-navs" author="rujan">
    <createTable tableName="permission_sub_navs">
      <column name="permission_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_permission_nav_id"
          referencedTableName="permission"
          referencedColumnNames="id"
        />

      </column>
      <column name="sub_navs_id" type="BIGINT">
        <constraints unique="true"
          foreignKeyName="fk_sub_nav_id"
          referencedTableName="sub_nav"
          referencedColumnNames="id"/>
      </column>

    </createTable>
  </changeSet>

  <changeSet id="5-create-role-permission-rights" author="david">
    <createTable tableName="role_permission_rights">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="role_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_role_permission_rights_role_id"
          referencedTableName="role"
          referencedColumnNames="id"
        />
      </column>
      <column name="permission_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_role_permission_rights_permission_id"
          referencedTableName="permission"
          referencedColumnNames="id"/>
      </column>
      <column name="del" type="boolean"/>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_role_permission_rights_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_role_permission_rights_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-role-permission-rights-api-rights" author="david">
    <createTable tableName="role_permission_rights_api_rights">
      <column name="role_permission_rights_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="api_rights_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>

    <addForeignKeyConstraint baseColumnNames="role_permission_rights_id"
      baseTableName="role_permission_rights_api_rights"
      constraintName="fk_role_permission_rights_api_rights_role_permission_rights_id"
      onDelete="CASCADE"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="role_permission_rights"/>
    <addForeignKeyConstraint baseColumnNames="api_rights_id"
      baseTableName="role_permission_rights_api_rights"
      constraintName="fk_role_permission_rights_api_rights_id"
      onDelete="RESTRICT"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="url_api"/>
  </changeSet>

  <changeSet id="5-create-company" author="david">
    <createTable tableName="company">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_company_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_company_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="4-create-nepse_company" author="david">
    <createTable tableName="nepse_company">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="amount_per_unit" type="DOUBLE">
        <constraints nullable="false"/>
      </column>
      <column name="company_name" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_nepse_company_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_nepse_company_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-base_http" author="david">
    <createTable tableName="base_http">
      <column name="base_http_id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="base_url" type="VARCHAR(256)">
        <constraints nullable=" false"/>
      </column>
      <column name="flag" type="INT">
        <constraints nullable="false"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="5-create-loan_template" author="david">
    <createTable tableName="loan_template">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="template_url" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="order_url" type="INT"/>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="template_view" type="VARCHAR2(4000)"/>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_loan_template_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_loan_template_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-sector" author="david">
    <createTable tableName="sector">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="sector_code" type="VARCHAR(256)"/>
      <column name="sector_name" type="VARCHAR(256)"/>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_sector_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_sector_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-sub-sector" author="david">
    <createTable tableName="sub_sector">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="sub_sector_code" type="VARCHAR(256)"/>
      <column name="sub_sector_name" type="VARCHAR(256)"/>
      <column name="sector_id" type="BIGINT"/>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_sub_sector_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_sub_sector_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
    <addForeignKeyConstraint baseColumnNames="sector_id"
      baseTableName="sub_sector"
      constraintName="fk_sub_sector_sector_id"
      referencedColumnNames="id"
      referencedTableName="sector"/>

  </changeSet>

  <changeSet id="5-create-segment" author="david">
    <createTable tableName="segment">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="segment_name" type="VARCHAR(256)"/>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_segment_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_segment_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-sub-segment" author="david">
    <createTable tableName="sub_segment">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="is_funded" type="BOOLEAN">
        <constraints nullable="false"/>
      </column>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="sub_segment_name" type="VARCHAR(256)"/>
      <column name="segment_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_sub_segment_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_sub_segment_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
    <addForeignKeyConstraint baseColumnNames="segment_id"
      baseTableName="sub_segment"
      constraintName="fk_sub_segment_segment_id"
      referencedColumnNames="id"
      referencedTableName="segment"/>

  </changeSet>


  <changeSet id="5-create-valuator" author="david">
    <createTable tableName="valuator">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)"/>
      <column name="contact_no" type="VARCHAR(256)"/>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="province_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_valuator_province_id"
          referencedTableName="province"
          referencedColumnNames="id"/>
      </column>
      <column name="district_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_valuator_district_id"
          referencedTableName="district"
          referencedColumnNames="id"/>
      </column>
      <column name="municipality_vdc_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_valuator_municipality_vdc_id"
          referencedTableName="municipality_vdc"
          referencedColumnNames="id"/>
      </column>
      <column name="street_name" type="VARCHAR(256)"/>
      <column name="ward_number" type="VARCHAR(256)"/>
      <column name="site_province_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_valuator_site_province_id"
          referencedTableName="province"
          referencedColumnNames="id"/>
      </column>
      <column name="site_district_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_valuator_site_district_id"
          referencedTableName="district"
          referencedColumnNames="id"/>
      </column>
      <column name="site_municipality_vdc_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_valuator_site_municipality_vdc_id"
          referencedTableName="municipality_vdc"
          referencedColumnNames="id"/>
      </column>
      <column name="site_street_name" type="VARCHAR(256)"/>
      <column name="site_ward_number" type="VARCHAR(256)"/>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_valuator_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_valuator_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-loan-config" author="david">
    <createTable tableName="loan_config">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="is_fundable" type="boolean"/>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="is_renewable" type="boolean"/>
      <column name="total_points" type="BIGINT"/>
      <column name="enable_eligibility" type="boolean"/>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_loan_config_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_loan_config_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>


  <changeSet id="5-create-sub-segment-loan-config" author="david">
    <createTable tableName="sub_segment_loan_config">
      <column name="sub_segment_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="loan_config_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>

    <addForeignKeyConstraint baseColumnNames="sub_segment_id"
      baseTableName="sub_segment_loan_config"
      constraintName="fk_sub_segment_loan_config_sub_segment_id"
      onDelete="CASCADE"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="sub_segment"/>
    <addForeignKeyConstraint baseColumnNames="loan_config_id"
      baseTableName="sub_segment_loan_config"
      constraintName="fk_sub_segment_loan_config_list_loan_config_id"
      onDelete="RESTRICT"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="loan_config"/>
  </changeSet>

  <changeSet id="5-create-document" author="david">
    <createTable tableName="document">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)">
        <constraints nullable=" false"
          unique="true"
          uniqueConstraintName="udx_document_name"
        />
      </column>
      <column name="url" type="VARCHAR(256)"/>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_document_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_document_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-loan-cycle" author="david">
    <createTable tableName="loan_cycle">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="cycle" type="VARCHAR(256)">
        <constraints nullable=" false"/>
      </column>
      <column name="label" type="VARCHAR2(1000)"/>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_loan_cycle_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_loan_cycle_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-document-loan-cycle" author="msucil">
    <createTable tableName="document_loan_cycle">
      <column name="document_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="loan_cycle_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>

    <addForeignKeyConstraint baseColumnNames="document_id"
      baseTableName="document_loan_cycle"
      constraintName="fk_document_loan_cycle_document_id"
      onDelete="CASCADE"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="document"/>
    <addForeignKeyConstraint baseColumnNames="loan_cycle_id"
      baseTableName="document_loan_cycle"
      constraintName="fk_document_loan_cycle_loan_cycle_id"
      onDelete="RESTRICT"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="loan_cycle"/>
  </changeSet>

  <changeSet id="5-create-loan-config-template-list" author="david">
    <createTable tableName="loan_config_template_list">
      <column name="loan_config_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="template_list_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>

    <addForeignKeyConstraint baseColumnNames="loan_config_id"
      baseTableName="loan_config_template_list"
      constraintName="fk_loan_config_template_list_loan_config_id"
      onDelete="CASCADE"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="loan_config"/>
    <addForeignKeyConstraint baseColumnNames="template_list_id"
      baseTableName="loan_config_template_list"
      constraintName="fk_loan_config_template_list_template_list_id"
      onDelete="RESTRICT"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="loan_template"/>
  </changeSet>

  <changeSet id="5-create-loan-config-initial" author="david">
    <createTable tableName="loan_config_initial">
      <column name="loan_config_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="initial_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>

    <addForeignKeyConstraint baseColumnNames="loan_config_id"
      baseTableName="loan_config_initial"
      constraintName="fk_loan_config_initial_loan_config_id"
      onDelete="CASCADE"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="loan_config"/>
    <addForeignKeyConstraint baseColumnNames="initial_id"
      baseTableName="loan_config_initial"
      constraintName="fk_loan_config_initial_initial_id"
      onDelete="RESTRICT"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="document"/>
  </changeSet>

  <changeSet id="5-create-loan-config-renew" author="david">
    <createTable tableName="loan_config_renew">
      <column name="loan_config_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="renew_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>

    <addForeignKeyConstraint baseColumnNames="loan_config_id"
      baseTableName="loan_config_renew"
      constraintName="fk_loan_config_renew_loan_config_id"
      onDelete="CASCADE"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="loan_config"/>
    <addForeignKeyConstraint baseColumnNames="renew_id"
      baseTableName="loan_config_renew"
      constraintName="fk_loan_config_renew_renew_id"
      onDelete="RESTRICT"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="document"/>
  </changeSet>

  <changeSet id="5-create-approval-limit" author="david">
    <createTable tableName="approval_limit">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="amount" type="DOUBLE"/>
      <column name="loan_approval_type" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="loan_category_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_approval-limit_loan_category_id"
          referencedTableName="loan_config"
          referencedColumnNames="id"
        />
      </column>
      <column name="authorities_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_approval-limit_authorities_id"
          referencedTableName="role"
          referencedColumnNames="id"
        />
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_approval_limit_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_approval_limit_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>


  <changeSet id="5-create-customer" author="david">
    <createTable tableName="customer">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="title" type="VARCHAR(256)"/>
      <column name="customer_name" type="VARCHAR(256)"/>
      <column name="customer_id" type="VARCHAR(256)"/>
      <column name="account_no" type="VARCHAR(256)"/>
      <column name="province_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_province_id"
          referencedTableName="province"
          referencedColumnNames="id"/>
      </column>
      <column name="district_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_district_id"
          referencedTableName="district"
          referencedColumnNames="id"/>
      </column>
      <column name="municipalities_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_municipality_vdc_id"
          referencedTableName="municipality_vdc"
          referencedColumnNames="id"/>
      </column>
      <column name="street" type="VARCHAR(256)"/>
      <column name="ward_number" type="VARCHAR(256)"/>
      <column name="telephone" type="VARCHAR(256)"/>
      <column name="mobile" type="VARCHAR(256)"/>
      <column name="email" type="VARCHAR(256)"/>
      <column name="initial_relation_date" type="DATE"/>
      <column name="citizenship_number" type="VARCHAR(256)"/>
      <column name="citizenship_issued_date" type="DATE"/>
      <column name="citizenship_issued_place" type="VARCHAR(256)"/>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-customer-relative" author="david">
    <createTable tableName="customer_relative">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="title" type="VARCHAR(256)"/>
      <column name="customer_relation" type="VARCHAR(256)"/>
      <column name="customer_relative_name" type="VARCHAR(256)"/>
      <column name="citizenship_number" type="VARCHAR(256)"/>
      <column name="citizenship_issued_date" type="DATE"/>
      <column name="citizenship_issued_place" type="VARCHAR(256)"/>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_relative_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_relative_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-customer-customer-relatives" author="david">
    <createTable tableName="customer_customer_relatives">
      <column name="customer_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="customer_relatives_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>

    <addForeignKeyConstraint baseColumnNames="customer_id"
      baseTableName="customer_customer_relatives"
      constraintName="fk_customer_customer_relatives_customer_id"
      onDelete="CASCADE"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="customer"/>
    <addForeignKeyConstraint baseColumnNames="customer_relatives_id"
      baseTableName="customer_customer_relatives"
      constraintName="fk_customer_customer_relatives_customer_relatives_id"
      onDelete="RESTRICT"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="customer_relative"/>
  </changeSet>

  <changeSet id="5-create-capital" author="david">
    <createTable tableName="capital">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="authorized_capital" type="DOUBLE">
        <constraints nullable="false"/>
      </column>
      <column name="paid_up_capital" type="DOUBLE">
        <constraints nullable="false"/>
      </column>
      <column name="issued_capital" type="DOUBLE">
        <constraints nullable="false"/>
      </column>
      <column name="total_capital" type="DOUBLE">
        <constraints nullable="false"/>
      </column>
      <column name="fixed_capital" type="DOUBLE">
        <constraints nullable="false"/>
      </column>
      <column name="working_capital" type="DOUBLE">
        <constraints nullable="false"/>
      </column>
      <column name="number_of_shareholder" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_capital_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_capital_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-legal-status" author="david">
    <createTable tableName="legal_status">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="company_name" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="corporate_structure" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="registered_office" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="registered_under_act" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="registration_no" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="registration_date" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="pan_registration_office" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="pan_number" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="pan_registration_date" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_legal_status_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_legal-status_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-swot" author="david">
    <createTable tableName="swot">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="strength" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="weakness" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="opportunity" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="threats" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_swot_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_swot_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-entity_info" author="david">
    <createTable tableName="entity_info">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="legal_status_id" type="BIGINT">
        <constraints nullable="false"
          foreignKeyName="fk_entity_info_legal_status_id"
          referencedTableName="legal_status"
          referencedColumnNames="id"/>
      </column>
      <column name="capital_id" type="BIGINT">
        <constraints nullable="false"
          foreignKeyName="fk_entity_info_capital_id"
          referencedTableName="capital"
          referencedColumnNames="id"/>
      </column>
      <column name="swot_id" type="BIGINT">
        <constraints nullable="false"
          foreignKeyName="fk_entity_info_swot_id"
          referencedTableName="swot"
          referencedColumnNames="id"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_entity_info_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_entity_info_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-management-team" author="david">
    <createTable tableName="management_team">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="description" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="designation" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_management_team_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_management_team_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-proprietor" author="david">
    <createTable tableName="proprietor">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="contact_no" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="province_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_proprietor_province_id"
          referencedTableName="province"
          referencedColumnNames="id"
        />
      </column>
      <column name="district_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_proprietor_district_id"
          referencedTableName="district"
          referencedColumnNames="id"
        />
      </column>
      <column name="municipality_vdc_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_proprietor_municipality_vdc_id"
          referencedTableName="municipality_vdc"
          referencedColumnNames="id"
        />
      </column>
      <column name="share" type="DOUBLE">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_proprietor_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_proprietor_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-entity-info-management-team-list" author="david">
    <createTable tableName="entity_info_management_team_list">
      <column name="entity_info_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="management_team_list_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>

    <addForeignKeyConstraint baseColumnNames="entity_info_id"
      baseTableName="entity_info_management_team_list"
      constraintName="fk_entity_info_management_team_list_entity_info_id"
      onDelete="CASCADE"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="entity_info"/>
    <addForeignKeyConstraint baseColumnNames="management_team_list_id"
      baseTableName="entity_info_management_team_list"
      constraintName="fk_entity_info_management_team_list_management_team_list_id"
      onDelete="RESTRICT"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="management_team"/>
  </changeSet>

  <changeSet id="5-create-entity-info-proprietors-list" author="david">
    <createTable tableName="entity_info_proprietors_list">
      <column name="entity_info_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="proprietors_list_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>

    <addForeignKeyConstraint baseColumnNames="entity_info_id"
      baseTableName="entity_info_proprietors_list"
      constraintName="fk_entity_info_proprietors_list_entity_info_id"
      onDelete="CASCADE"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="entity_info"/>
    <addForeignKeyConstraint baseColumnNames="proprietors_list_id"
      baseTableName="entity_info_proprietors_list"
      constraintName="fk_entity_info_proprietors_list_proprietors_list_id"
      onDelete="RESTRICT"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="proprietor"/>
  </changeSet>

  <changeSet id="5-create-guarantor" author="david">
    <createTable tableName="guarantor">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)"/>
      <column name="address" type="VARCHAR(256)"/>
      <column name="citizenNumber" type="VARCHAR(256)"/>
      <column name="citizenIssuedYear" type="DATE"/>
      <column name="citizenIssuedPlace" type="VARCHAR(256)"/>
      <column name="contactNumber" type="VARCHAR(256)"/>
      <column name="fatherName" type="VARCHAR(256)"/>
      <column name="grandFatherName" type="VARCHAR(256)"/>
      <column name="relationship" type="VARCHAR(256)"/>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_guarantor_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_guarantor_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="3-create-memo-type-table" author="msucil">
    <createTable tableName="memo_type">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>

      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>

      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="3-create-memo-table" author="msucil">
    <createTable tableName="memo">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="reference_number" type="VARCHAR(256)">
        <constraints nullable="true"/>
      </column>
      <column name="subject" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="sent_by" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="sent_to" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="content" type="TEXT">
        <constraints nullable="false"/>
      </column>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="stage" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="memo_type_id" type="BIGINT">
        <constraints nullable="false"
          foreignKeyName="fk_memo_type_id"
          referencedTableName="memo_type"
          referencedColumnNames="id"
        />
      </column>

      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>

      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="3-create-memo-cc-user-table" author="msucil">
    <createTable tableName="memo_cc_user">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints primaryKey="true"/>
      </column>
      <column name="user_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="memo_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>
    <addForeignKeyConstraint baseTableName="memo_cc_user" baseColumnNames="user_id"
      constraintName="fk_memo_cc_user_user_id"
      referencedTableName="users" referencedColumnNames="id"/>
    <addForeignKeyConstraint baseTableName="memo_cc_user" baseColumnNames="memo_id"
      constraintName="fk_memo_cc_user_memo_id"
      referencedTableName="memo" referencedColumnNames="id"/>
  </changeSet>

  <changeSet id="3-create-memo-bcc-user-table" author="msucil">
    <createTable tableName="memo_bcc_user">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints primaryKey="true"/>
      </column>
      <column name="user_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="memo_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>

    <addForeignKeyConstraint baseTableName="memo_bcc_user" baseColumnNames="user_id"
      constraintName="fk_memo_bcc_user_user_id"
      referencedTableName="users" referencedColumnNames="id"/>
    <addForeignKeyConstraint baseTableName="memo_bcc_user" baseColumnNames="memo_id"
      constraintName="fk_memo_bcc_user_memo_id"
      referencedTableName="memo" referencedColumnNames="id"/>
  </changeSet>

  <changeSet id="3-create-memo-stage-table" author="msucil">
    <createTable tableName="memo_stage">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints primaryKey="true"/>
      </column>
      <column name="memo_id" type="BIGINT">
        <constraints nullable="false"
          foreignKeyName="fk_memo_stage_memo_id"
          referencedColumnNames="id"
          referencedTableName="memo"
        />
      </column>
      <column name="sent_by" type="BIGINT">
        <constraints nullable="false"
          foreignKeyName="fk_memo_stage_sent_by_user_id"
          referencedColumnNames="id"
          referencedTableName="users"
        />
      </column>
      <column name="sent_to" type="BIGINT">
        <constraints nullable="false"
          foreignKeyName="fk_memo_stage_sent_to_user_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="stage" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="note" type="TEXT"/>

      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>

      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
    </createTable>
  </changeSet>





  <include file="20190503_question.xml" relativeToChangelogFile="true"/>
  <include file="20190503_answer.xml" relativeToChangelogFile="true"/>
  <include file="20190503_applicant.xml" relativeToChangelogFile="true"/>
  <include file="20190503_applicant_answer.xml" relativeToChangelogFile="true"/>
  <include file="20190504_submission_document.xml" relativeToChangelogFile="true"/>
  <include file="20190504_applicant_document.xml" relativeToChangelogFile="true"/>
  <include file="20190513_role_hierarchy.xml" relativeToChangelogFile="true"/>
  <include file="20190516_dms_loan.xml" relativeToChangelogFile="true"/>
  <include file="20190609_customer_loan.xml" relativeToChangelogFile="true"/>
  <include file="20190515_loan_config_document.xml" relativeToChangelogFile="true"/>
  <include file="20190605_eligibility_criteria.xml" relativeToChangelogFile="true"/>
  <include file="20190605_eligibility_question.xml" relativeToChangelogFile="true"/>
  <include file="20190605_eligibility_answer.xml" relativeToChangelogFile="true"/>
  <include file="20190610_opening_account.xml" relativeToChangelogFile="true"/>
  <include file="20190621_branch_user.xml" relativeToChangelogFile="true"/>
  <include file="20190624_offer_letter.xml" relativeToChangelogFile="true"/>
  <include file="20190702_user.xml" relativeToChangelogFile="true"/>
  <include file="20190701_email_config.xml" relativeToChangelogFile="true"/>
  <include file="20190703_alter_dms.xml" relativeToChangelogFile="true"/>
  <include file="loan_form/20190705_proposal.xml" relativeToChangelogFile="true"/>
  <include file="loan_form/20190705_alter_customer_loan_proposal.xml"
    relativeToChangelogFile="true"/>
  <include file="20190707_alter_management_team.xml" relativeToChangelogFile="true"/>
  <include file="20191007_product_mode.xml" relativeToChangelogFile="true"/>
  <include file="20190716_closure_document.xml" relativeToChangelogFile="true"/>
  <include file="loan_form/20190724_alter_dms.xml" relativeToChangelogFile="true"/>
  <include file="20190724_customer_otp.xml" relativeToChangelogFile="true"/>
  <include file="alter_changeset/20190728_alter_loan_config_new_field.xml"
    relativeToChangelogFile="true"/>
  <include file="alter_changeset/20190731_eligibility_criteria.xml" relativeToChangelogFile="true"/>
  <include file="alter_changeset/20190731_alter_customer_loan.xml" relativeToChangelogFile="true"/>
  <include file="alter_changeset/20190108_alter_dms.xml" relativeToChangelogFile="true"/>
  <include file="20190801_notificationMessage.xml" relativeToChangelogFile="true"/>
  <include file="alter_changeset/20190508_alter_customer_loan.xml" relativeToChangelogFile="true"/>
  <include file="alter_changeset/20190804_alter_customer.xml" relativeToChangelogFile="true"/>
  <include file="alter_changeset/20190804_alter_dms.xml" relativeToChangelogFile="true"/>
  <include file="alter_changeset/20190809_alter_entity_info.xml" relativeToChangelogFile="true"/>
  <include file="20190810_dms_loan_file_securities.xml" relativeToChangelogFile="true"/>
  <include file="alter_changeset/20190816_alter_loan_config_new_entity.xml"
    relativeToChangelogFile="true"/>
  <include file="alter_changeset/20190816_dms.xml" relativeToChangelogFile="true"/>
  <include file="alter_changeset/20190818_applicant.xml" relativeToChangelogFile="true"/>
  <include file="alter_changeset/20190821_document.xml" relativeToChangelogFile="true"/>
  <include file="loan_form/20190709_financial.xml" relativeToChangelogFile="true"/>
  <include file="loan_form/20190709_alter_customer_loan_financial.xml"
    relativeToChangelogFile="true"/>
  <include file="alter_changeset/20192608_drop_email_constraint_user.xml"
    relativeToChangelogFile="true"/>
  <include file="loan_form/20190710_sitevisit.xml" relativeToChangelogFile="true"/>
  <include file="alter_changeset/20190826_alter_customer_loan.xml" relativeToChangelogFile="true"/>
  <include file="alter_changeset/20190829_change_data_type.xml" relativeToChangelogFile="true"/>
  <include file="alter_changeset/20190829_change_proposal_data_type.xml"
    relativeToChangelogFile="true"/>
  <include file="alter_changeset/20190829_change_dms_data_type.xml" relativeToChangelogFile="true"/>
  <include file="alter_changeset/20190902_alter_customer_loan.xml" relativeToChangelogFile="true"/>
  <include file="alter_changeset/20190904_alter_entity_date.xml" relativeToChangelogFile="true"/>
  <include file="alter_changeset/20190912_alter_user.xml" relativeToChangelogFile="true"/>
  <include file="alter_changeset/20190906_site_visit_entity_changes.xml"
    relativeToChangelogFile="true"/>
  <include file="alter_changeset/20190909-entity-info-to-company-info.xml"
    relativeToChangelogFile="true"/>
  <include file="alter_changeset/20190911-dms-entity-changes.xml" relativeToChangelogFile="true"/>
  <include file="alter_changeset/20190920_alter_customer.xml" relativeToChangelogFile="true"/>
  <include file="alter_changeset/dms_refactor/20191022_dms_refactor.xml" relativeToChangelogFile="true"/>
  <include file="20200707_credit_memo.xml" relativeToChangelogFile="true"/>
  <include file="20200707_credit_memo_document.xml" relativeToChangelogFile="true"/>
  <include file="alter_changeset/20200707_alter_credit_memo_stage.xml" relativeToChangelogFile="true"/>
  <include file="alter_changeset/20200811-alter-customer.xml" relativeToChangelogFile="true"/>

  <changeSet id="4-create-credit-memo-type-documents" author="himal">
    <createTable tableName="credit_memo_type_documents">
      <column name="credit_memo_type_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="documents_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>

    <addForeignKeyConstraint baseColumnNames="credit_memo_type_id"
                             baseTableName="credit_memo_type_documents"
                             constraintName="fk_credit_memo_type_documents_credit_memo_type_id"
                             onDelete="CASCADE"
                             onUpdate="CASCADE"
                             referencedColumnNames="id"
                             referencedTableName="credit_memo_type"/>
    <addForeignKeyConstraint baseColumnNames="documents_id"
                             baseTableName="credit_memo_type_documents"
                             constraintName="fk_credit_memo_type_documents_documents_id"
                             onDelete="RESTRICT"
                             onUpdate="CASCADE"
                             referencedColumnNames="id"
                             referencedTableName="document"/>
  </changeSet>

  <changeSet id="6-create-credit_memo_memo_type_documents" author="himal">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="credit_memo_memo_type_documents"/>
      </not>
    </preConditions>

    <createTable tableName="credit_memo_memo_type_documents">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
                     foreignKeyName="fk_credit_memo_memo_type_documents_created_by_id_users_id"
                     referencedTableName="users"
                     referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
                     foreignKeyName="fk_credit_memo_memo_type_documents_modified_by_id_users_id"
                     referencedTableName="users"
                     referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
      <column name="document_id" type="BIGINT"/>
      <column name="path" type="VARCHAR(500)"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-credit_memo_memo_type_documents_path" author="himal">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="credit_memo_memo_type_documents_path"/>
      </not>
    </preConditions>

    <createTable tableName="credit_memo_memo_type_documents_path">
      <column name="credit_memo_id" type="BIGINT">
        <constraints nullable="false"
                     foreignKeyName="fk_credit_memo_type_documents_path_credit_memo_id"
                     referencedTableName="credit_memo"
                     referencedColumnNames="id"/>
      </column>
      <column name="memo_type_documents_id" type="BIGINT">
        <constraints nullable="false"
                     foreignKeyName="fk_credit_memo_type_documents_path_credit_memo_document_id"
                     referencedTableName="credit_memo_memo_type_documents"
                     referencedColumnNames="id"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="8-drop-foreignKeyConstraint-customer_loan_id" author="himal rai">
    <preConditions onFail="MARK_RAN">
      <foreignKeyConstraintExists foreignKeyName="fk_credit_memo_customer_loan_id_customer_loan_id"/>
    </preConditions>
    <comment>Drop FK fk_credit_memo_customer_loan_id_customer_loan_id</comment>
    <dropForeignKeyConstraint baseTableName="credit_memo" constraintName="fk_credit_memo_customer_loan_id_customer_loan_id"/>
  </changeSet>

  <changeSet id="9-remove-customer_loan_id" author="himal rai">
    <dropColumn tableName="credit_memo" columnName="customer_loan_id"/>
  </changeSet>

  <changeSet id="10-alter-credit-memo-add-customer-loan-id" author="himal rai">
    <addColumn
            tableName="credit_memo">
      <column name="customer_loan_id" type="BIGINT">
        <constraints nullable="true"
                     foreignKeyName="fk_credit_memo_customer_loan_id_customer_loan_id"
                     referencedTableName="customer_loan"
                     referencedColumnNames="id"/>
      </column>
    </addColumn>
  </changeSet>

  <changeSet id="11-alter-credit-memo-add-loanAssociated" author="himal rai">
    <addColumn
            tableName="credit_memo">
      <column name="loan_associated" type="boolean">
      </column>
    </addColumn>
  </changeSet>

  <changeSet id="12-create-memo_role-table" author="himal">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="memo_role"/>
      </not>
    </preConditions>
    <createTable tableName="memo_role">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="role_name" type="VARCHAR(256)">
        <constraints nullable=" false"
                     unique="true"
                     uniqueConstraintName="udx_Memo_Role_role_name"
        />
      </column>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="role_type" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="role_access" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="1-create-memo-role-hierarchy" author="himal">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="memo_role_hierarchy"/>
      </not>
    </preConditions>
    <createTable tableName="memo_role_hierarchy">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="role_id" type="BIGINT">
        <constraints nullable="true"
                     foreignKeyName="fk_memo_role_hierarchy_role_id"
                     referencedTableName="memo_role"
                     referencedColumnNames="id"
        />
      </column>
      <column name="role_order" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
                     foreignKeyName="fk_memo_role_hierarchy_created_by_id"
                     referencedTableName="users"
                     referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
                     foreignKeyName="fk_memo_role_hierarchy_modified_by_id"
                     referencedTableName="users"
                     referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>

  </changeSet>

  <changeSet id="01-create-credit-memo-type-roles" author="himal">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="credit_memo_type_roles"/>
      </not>
    </preConditions>
    <createTable tableName="credit_memo_type_roles">
      <column name="credit_memo_type_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="roles_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>

    <addForeignKeyConstraint baseColumnNames="credit_memo_type_id"
                             baseTableName="credit_memo_type_roles"
                             constraintName="fk_credit_memo_type_roles_credit_memo_type_id"
                             onDelete="CASCADE"
                             onUpdate="CASCADE"
                             referencedColumnNames="id"
                             referencedTableName="credit_memo_type"/>
    <addForeignKeyConstraint baseColumnNames="roles_id"
                             baseTableName="credit_memo_type_roles"
                             constraintName="fk_credit_memo_type_roles_id"
                             onDelete="RESTRICT"
                             onUpdate="CASCADE"
                             referencedColumnNames="id"
                             referencedTableName="role"/>
  </changeSet>

<!--  <changeSet id="02-alter-users-add-memo-role-id" author="himal rai">-->
<!--    <addColumn-->
<!--            tableName="users">-->
<!--      <column name="memo_role_id" type="BIGINT">-->
<!--        <constraints nullable="true"-->
<!--                     foreignKeyName="fk_users_memo_role_id"-->
<!--                     referencedTableName="memo_role"-->
<!--                     referencedColumnNames="id"/>-->
<!--      </column>-->
<!--    </addColumn>-->
<!--  </changeSet>-->


    <changeSet id="03-alter-credit-memo-add-to" author="himal rai">
      <addColumn
              tableName="credit_memo">
        <column name="to_user" type="VARCHAR(200)"/>
      </addColumn>
    </changeSet>

  <changeSet id="04-alter-credit-memo-add-from" author="himal rai">
    <addColumn
            tableName="credit_memo">
      <column name="from_user" type="VARCHAR(200)"/>
    </addColumn>
  </changeSet>

  <changeSet id="04-alter-credit-memo-add-branchName" author="himal rai">
    <addColumn
            tableName="credit_memo">
      <column name="branch_name" type="VARCHAR(255)"/>
    </addColumn>
  </changeSet>

  <changeSet id="approval-role-hierarchy" author="himal rai">
    <createTable tableName="approval_role_hierarchy">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="role_id" type="BIGINT">
        <constraints nullable="true"
                     foreignKeyName="fk_approval_role_hierarchy_role_id"
                     referencedTableName="role"
                     referencedColumnNames="id"
        />
      </column>
      <column name="role_order" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
                     foreignKeyName="fk_approval_role_hierarchy_created_by_id"
                     referencedTableName="users"
                     referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
                     foreignKeyName="fk_approval_role_hierarchy_modified_by_id"
                     referencedTableName="users"
                     referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
      <column name="approval_type" type="VARCHAR(50)" defaultValue="DEFAULT"/>
      <column name="ref_id" type="BIGINT" defaultValue="0">
        <constraints nullable="true"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="05-create-memo-category" author="himal rai">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="memo_category"/>
      </not>
    </preConditions>
    <createTable tableName="memo_category">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
                     foreignKeyName="fk_memo_category_created_by_id_users_id"
                     referencedTableName="users"
                     referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
                     foreignKeyName="fk_memo_category_modified_by_id_users_id"
                     referencedTableName="users"
                     referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
      <column name="name" type="VARCHAR(255)"/>
      <column name="status" type="INT"/>
    </createTable>
  </changeSet>

  <changeSet id="06-create-credit_memo_type_category" author="himal rai">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="credit_memo_type_category"/>
      </not>
    </preConditions>

    <createTable tableName="credit_memo_type_category">
      <column name="credit_memo_type_id" type="BIGINT">
        <constraints nullable="true"
                     foreignKeyName="fk_credit_memo_type_category_credit_memo_type_id_credit_memo_id"
                     referencedTableName="credit_memo_type"
                     referencedColumnNames="id"/>
      </column>
      <column name="category_id" type="BIGINT">
        <constraints nullable="true"
                     foreignKeyName="fk_credit_memo_type_category_category_id_credit_memo_category_id"
                     referencedTableName="memo_category"
                     referencedColumnNames="id"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="07-create-credit_memo_user_flow" author="himal rai">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="credit_memo_user_flow"/>
      </not>
    </preConditions>

    <createTable tableName="credit_memo_user_flow">
      <column name="credit_memo_id" type="BIGINT">
        <constraints nullable="true"
                     foreignKeyName="fk_credit_memo_user_flow_credit_memo_id_credit_memo_id"
                     referencedTableName="credit_memo"
                     referencedColumnNames="id"/>
      </column>
      <column name="user_flow_id" type="BIGINT">
        <constraints nullable="true"
                     foreignKeyName="fk_credit_memo_user_flow_id_credit_memo_user_flow_id"
                     referencedTableName="users"
                     referencedColumnNames="id"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="08-alter-credit-memo-add-branch" author="himal rai">
    <addColumn
            tableName="credit_memo">
      <column name="branch_id" type="BIGINT">
        <constraints nullable="true"
                     foreignKeyName="fk_credit_memo_branch_id"
                     referencedTableName="branch"
                     referencedColumnNames="id"/>
      </column>
    </addColumn>
  </changeSet>
</databaseChangeLog>
